<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ò–≥—Ä–∞-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è –ø–∞—Ä—ã</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body { margin: 0; background: #0b0c10; color: #eaf0ff; }
    .wrap { max-width: 860px; margin: 0 auto; padding: 20px; }
    .card {
      background: #121420; border: 1px solid rgba(255,255,255,.08);
      border-radius: 18px; padding: 18px; box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    h1 { font-size: 20px; margin: 0 0 12px; opacity: .95; }
    .row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
    button, select {
      background: #1a1f2e; color: #eaf0ff; border: 1px solid rgba(255,255,255,.12);
      border-radius: 12px; padding: 10px 12px; cursor: pointer;
    }
    button:hover { border-color: rgba(255,255,255,.25); }
    .pill { font-size: 12px; opacity: .85; padding: 6px 10px; border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.03);
    }
    .title { display:flex; gap:10px; align-items:baseline; flex-wrap:wrap; }
    .title h2 { margin: 0; font-size: 18px; }
    .meta { opacity: .8; font-size: 12px; }
    ul { margin: 10px 0 0; padding-left: 18px; }
    li { margin: 6px 0; line-height: 1.35; }
    .muted { opacity: .8; }
    .divider { height: 1px; background: rgba(255,255,255,.08); margin: 14px 0; }
    .history { margin-top: 14px; }
    .history details { background: rgba(255,255,255,.02); border:1px solid rgba(255,255,255,.08);
      border-radius: 14px; padding: 10px 12px; }
    .history summary { cursor: pointer; }
    .small { font-size: 12px; opacity: .85; }
    .timer { font-variant-numeric: tabular-nums; font-size: 14px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="title">
        <h1>–ò–≥—Ä–∞-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è –ø–∞—Ä—ã</h1>
        <span class="pill" id="datePill"></span>
      </div>

      <div class="row" style="margin:12px 0 6px;">
        <button id="drawBtn">–í—ã—Ç—è–Ω—É—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</button>
        <button id="pauseBtn">–ü–∞—É–∑–∞</button>
        <button id="resetBtn">–ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è</button>

        <span class="pill">–£—Ä–æ–≤–µ–Ω—å:
          <select id="modeSel" aria-label="–£—Ä–æ–≤–µ–Ω—å">
            <option value="light">–õ—ë–≥–∫–∏–π</option>
            <option value="deep">–ì–ª—É–±–∂–µ</option>
          </select>
        </span>

        <span class="pill">–¢–∞–π–º–µ—Ä: <span class="timer" id="timer">00:00</span></span>
      </div>

      <p class="small muted">
        –ü—Ä–∞–≤–∏–ª–∞: –Ω–µ —Ä–µ—à–∞–µ–º –ø—Ä–æ–±–ª–µ–º—ã, –Ω–µ –ø–µ—Ä–µ—É–±–µ–∂–¥–∞–µ–º, –≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ —Å–µ–±—è. –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç.
      </p>

      <div class="divider"></div>

      <div class="title">
        <h2 id="cardName">–ù–∞–∂–º–∏—Ç–µ ‚Äú–í—ã—Ç—è–Ω—É—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É‚Äù</h2>
        <span class="pill" id="cardTag" style="display:none;"></span>
      </div>
      <p class="meta" id="cardIntent"></p>
      <ul id="cardQuestions"></ul>
      <p class="small muted" id="cardAlt" style="margin-top:10px;"></p>

      <div class="history">
        <details>
          <summary>–ò—Å—Ç–æ—Ä–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏</summary>
          <ol id="historyList"></ol>
        </details>
      </div>
    </div>
  </div>

<script>
  // ======= –î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–µ–∫ =======
  const CARDS = [
    {
      id: "health",
      tag: "üü¶",
      name: "–ó–¥–æ—Ä–æ–≤—å–µ",
      intent: "–ü—Ä–æ —Ç–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –æ–ø–æ—Ä—É.",
      light: [
        "–í –∫–∞–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –º–æ—ë –∑–¥–æ—Ä–æ–≤—å–µ –∏ —ç–Ω–µ—Ä–≥–∏—è —Å–µ–π—á–∞—Å?",
        "–ß—Ç–æ –º–Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –ª—É—á—à–µ?",
        "–ï—Å—Ç—å –ª–∏ —á—Ç–æ-—Ç–æ, –æ —á—ë–º –≤–∞–∂–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞?"
      ],
      deep: [
        "–í –∫–∞–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –º–æ—ë —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ?",
        "–ß—Ç–æ —Å–µ–π—á–∞—Å —É—Ö—É–¥—à–∞–µ—Ç –º–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ?",
        "–ö–∞–∫ —Å–æ –º–Ω–æ–π –ª—É—á—à–µ –±—ã—Ç—å, –∫–æ–≥–¥–∞ –º–Ω–µ –Ω–µ–ø—Ä–æ—Å—Ç–æ?"
      ],
      alt: "–ï—Å–ª–∏ —Ç—è–∂–µ–ª–æ: –≤—ã–±–µ—Ä–∏—Ç–µ 1 –≤–æ–ø—Ä–æ—Å –∏ –æ—Ç–≤–µ—Ç—å—Ç–µ –∫–æ—Ä–æ—Ç–∫–æ."
    },
    {
      id: "therapy",
      tag: "üü¶",
      name: "–ü—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–∏—è",
      intent: "–ü—Ä–æ –æ–ø—ã—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —Ç–µ—Ä–∞–ø–∏–∏.",
      light: [
        "–ß—Ç–æ –º–Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–æ —Å–ª–æ–∂–Ω—ã–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏?",
        "–ï—Å—Ç—å –ª–∏ —É –º–µ–Ω—è —Å–µ–π—á–∞—Å –∫–∞–∫–∞—è-—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–ª—é–¥–∏/–ø—Ä–∞–∫—Ç–∏–∫–∏)?"
      ],
      deep: [
        "–ï—Å—Ç—å –ª–∏ —É –º–µ–Ω—è —Å–µ–π—á–∞—Å –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–∏—è? –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø–æ—á–µ–º—É?",
        "–ß—Ç–æ –º–Ω–µ –¥–∞–ª –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ–ø—ã—Ç?",
        "–ö–∞–∫ —è –æ—Ç–Ω–æ—à—É—Å—å –∫ –∏–¥–µ–µ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ç–µ—Ä–∞–ø–∏–∏?"
      ],
      alt: "–ú–æ–∂–Ω–æ –æ—Ç–≤–µ—á–∞—Ç—å –±–µ–∑ –¥–µ—Ç–∞–ª–µ–π: –ø—Ä–æ—Å—Ç–æ ¬´–¥–∞/–Ω–µ—Ç/–Ω–µ –∑–Ω–∞—é¬ª + –æ–¥–Ω–∞ —Ñ—Ä–∞–∑–∞."
    },
    {
      id: "kids",
      tag: "üü¶",
      name: "–î–µ—Ç–∏",
      intent: "–ü—Ä–æ –≤–∑–≥–ª—è–¥—ã –∏ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑ —Ä–µ—à–µ–Ω–∏–π.",
      light: [
        "–ö–∞–∫ —è —Å–µ–π—á–∞—Å —á—É–≤—Å—Ç–≤—É—é —Ç–µ–º—É –¥–µ—Ç–µ–π?",
        "–ï—Å—Ç—å –ª–∏ –∑–¥–µ—Å—å —Å—Ç—Ä–∞—Ö–∏ –∏–ª–∏ –Ω–∞–¥–µ–∂–¥—ã?"
      ],
      deep: [
        "–•–æ—á—É –ª–∏ —è –¥–µ—Ç–µ–π? –ï—Å–ª–∏ –¥–∞/–Ω–µ—Ç ‚Äî –∫–∞–∫ —è —ç—Ç–æ —á—É–≤—Å—Ç–≤—É—é?",
        "–ö–∞–∫ –º–æ—ë –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —ç—Ç–æ–º—É –º–µ–Ω—è–ª–æ—Å—å —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º?",
        "–ß—Ç–æ –≤ —ç—Ç–æ–π —Ç–µ–º–µ –¥–ª—è –º–µ–Ω—è —Å–∞–º–æ–µ —É—è–∑–≤–∏–º–æ–µ?"
      ],
      alt: "–ü—Ä–∞–≤–∏–ª–æ: —Å–µ–≥–æ–¥–Ω—è –º—ã –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ–º —Ä–µ—à–µ–Ω–∏–π ‚Äî –º—ã —É–∑–Ω–∞—ë–º –¥—Ä—É–≥ –¥—Ä—É–≥–∞."
    },
    {
      id: "hurt",
      tag: "üü®",
      name: "–ó–∞–¥–µ—Ç–æ—Å—Ç—å",
      intent: "–ü—Ä–æ —ç–ø–∏–∑–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–µ–ª, –±–µ–∑ –æ–±–≤–∏–Ω–µ–Ω–∏–π.",
      light: [
        "–ë—ã–ª –ª–∏ –º–æ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–Ω–µ –¥–æ —Å–∏—Ö –ø–æ—Ä –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ –≤—Å–ø–æ–º–∏–Ω–∞—Ç—å?",
        "–ß—Ç–æ —è —Ç–æ–≥–¥–∞ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª(–∞)?"
      ],
      deep: [
        "–ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?",
        "–ß—Ç–æ —è –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª(–∞) –≤ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç?",
        "–ß—Ç–æ —ç—Ç–æ –∑–∞–¥–µ–ª–æ –≤–æ –º–Ω–µ?",
        "–í —á—ë–º —è —Ç–æ–≥–¥–∞ –Ω—É–∂–¥–∞–ª—Å—è(–ª–∞—Å—å), –Ω–æ –Ω–µ —Å–º–æ–≥(–ª–∞) —Å–∫–∞–∑–∞—Ç—å?"
      ],
      alt: "–ó–∞–ø—Ä–µ—Ç: ¬´—Ç—ã –≤—Å–µ–≥–¥–∞/—Ç—ã –Ω–∏–∫–æ–≥–¥–∞¬ª. –¢–æ–ª—å–∫–æ –ø—Ä–æ —Å–µ–±—è."
    },
    {
      id: "heavyMemory",
      tag: "üü®",
      name: "–¢—è–∂—ë–ª–æ–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ",
      intent: "–ü—Ä–æ –ø—Ä–æ—à–ª—ã–π –æ–ø—ã—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–ª–∏—è–µ—Ç –Ω–∞ –±–ª–∏–∑–æ—Å—Ç—å.",
      light: [
        "–ï—Å—Ç—å –ª–∏ –æ–ø—ã—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–¥–µ–ª–∞–ª –º–µ–Ω—è –æ—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö?",
        "–ö–∞–∫ –æ–Ω –Ω–∞ –º–µ–Ω—è –≤–ª–∏—è–µ—Ç —Å–µ–π—á–∞—Å?"
      ],
      deep: [
        "–ö–∞–∫–æ–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–æ —Å–∏—Ö –ø–æ—Ä –æ—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è?",
        "–ö–∞–∫–∏–µ —á—É–≤—Å—Ç–≤–∞ –≤ –Ω—ë–º —Å–∞–º—ã–µ —Å–∏–ª—å–Ω—ã–µ?",
        "–ö–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –º–µ–Ω—è –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Å–µ–π—á–∞—Å?"
      ],
      alt: "–ü–∞—Ä—Ç–Ω—ë—Ä –Ω–µ –ª–µ—á–∏—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ —Ä—è–¥–æ–º –∏ —Å–ª—É—à–∞–µ—Ç."
    },
    {
      id: "notPerfect",
      tag: "üü©",
      name: "–Ø –Ω–µ –∏–¥–µ–∞–ª–µ–Ω / –Ω–µ –∏–¥–µ–∞–ª—å–Ω–∞",
      intent: "–ü—Ä–æ —á–µ—Å—Ç–Ω–æ—Å—Ç—å –∏ —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç—ã–¥–∞.",
      light: [
        "–ß—Ç–æ –≤–æ –º–Ω–µ –∏–Ω–æ–≥–¥–∞ –±—ã–≤–∞–µ—Ç –Ω–µ—É–¥–æ–±–Ω—ã–º, –Ω–æ –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å?",
        "–ö–æ–≥–¥–∞ —ç—Ç–æ —á–∞—â–µ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è?"
      ],
      deep: [
        "–ö–∞–∫–∞—è –º–æ—è —á–µ—Ä—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—Ä—É–¥–Ω–æ–π –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞?",
        "–ß—Ç–æ –∑–∞ –Ω–µ–π —Å—Ç–æ–∏—Ç (—Å—Ç—Ä–∞—Ö, –∑–∞—â–∏—Ç–∞, —É—Å—Ç–∞–ª–æ—Å—Ç—å)?",
        "–ö–∞–∫ —Å–æ –º–Ω–æ–π –ª—É—á—à–µ –±—ã—Ç—å, –∫–æ–≥–¥–∞ —ç—Ç–∞ —á–∞—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞?"
      ],
      alt: "–ì–æ–≤–æ—Ä–∏–º –±–µ–∑ —Å–∞–º–æ—É–Ω–∏–∂–µ–Ω–∏—è: —ç—Ç–æ –Ω–µ ¬´–ø–ª–æ—Ö–æ–µ¬ª, –∞ ¬´–∂–∏–≤–æ–µ¬ª."
    },
    {
      id: "confession",
      tag: "üü©",
      name: "–ü—Ä–∏–∑–Ω–∞–Ω–∏–µ",
      intent: "–ü—Ä–æ —á–µ—Å—Ç–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç–∞–∫—Ç.",
      light: [
        "–°–µ–∫—Ä–µ—Ç: –º–∞–ª–µ–Ω—å–∫–∏–π —Ñ–∞–∫—Ç/–¥–µ–π—Å—Ç–≤–∏–µ, –æ –∫–æ—Ç–æ—Ä–æ–º –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –Ω–µ –∑–Ω–∞—Ç—å.",
        "–ü–æ—á–µ–º—É –º–Ω–µ —Ö–æ—á–µ—Ç—Å—è —ç—Ç–∏–º –ø–æ–¥–µ–ª–∏—Ç—å—Å—è?"
      ],
      deep: [
        "–ú–Ω–µ –≤–∞–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å —ç—Ç–æ, —á—Ç–æ–±—ã –±—ã—Ç—å —á–µ—Å—Ç–Ω—ã–º(–æ–π).",
        "–ß—Ç–æ-—Ç–æ, —á—Ç–æ —è –æ–±—ã—á–Ω–æ —Å–∫—Ä—ã–≤–∞—é –∏–ª–∏ –Ω–µ –¥–æ–≥–æ–≤–∞—Ä–∏–≤–∞—é.",
        "–ß—Ç–æ –º–Ω–µ —Å–ª–æ–∂–Ω–æ –ø—Ä–∏–∑–Ω–∞—Ç—å –≤—Å–ª—É—Ö?"
      ],
      alt: "–ü–æ—Å–ª–µ –ø—Ä–∏–∑–Ω–∞–Ω–∏—è ‚Äî –ø–∞—É–∑–∞. –û—Ç–≤–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞: ¬´—è —Å–ª—ã—à—É —Ç–µ–±—è¬ª."
    },
    {
      id: "fear",
      tag: "üü©",
      name: "–°—Ç—Ä–∞—Ö",
      intent: "–ü—Ä–æ —É—è–∑–≤–∏–º–æ—Å—Ç—å –±–µ–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.",
      light: [
        "–í —á—ë–º —è —á—É–≤—Å—Ç–≤—É—é –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å?",
        "–ß—Ç–æ –º–Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è?"
      ],
      deep: [
        "–ß–µ–≥–æ —è –±–æ—é—Å—å –≤ –±–ª–∏–∑–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö?",
        "–ö–∞–∫ —è –æ–±—ã—á–Ω–æ –∑–∞—â–∏—â–∞—é—Å—å, –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞—à–Ω–æ?",
        "–ß—Ç–æ –º–Ω–µ –≤–∞–∂–Ω–æ —É—Å–ª—ã—à–∞—Ç—å –∏–ª–∏ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Ä—è–¥–æ–º?"
      ],
      alt: "–ú–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å —Å—Ç—Ä–∞—Ö –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º."
    },
    {
      id: "compliment",
      tag: "üü•",
      name: "–ö–æ–º–ø–ª–∏–º–µ–Ω—Ç",
      intent: "–ü—Ä–æ —Ü–µ–Ω–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ.",
      light: [
        "–ß—Ç–æ –º–Ω–µ –≤ —Ç–µ–±–µ –ø—Ä–æ—Å—Ç–æ –Ω—Ä–∞–≤–∏—Ç—Å—è (–≤–Ω–µ—à–Ω–æ—Å—Ç—å/—é–º–æ—Ä/–∂–µ—Å—Ç—ã)?",
        "–ß—Ç–æ –º–µ–Ω—è –≤ —Ç–µ–±–µ –ø—Ä–∏—Ç—è–≥–∏–≤–∞–µ—Ç?"
      ],
      deep: [
        "–Ø —Ü–µ–Ω—é –≤ —Ç–µ–±–µ‚Ä¶",
        "–ó–∞ —á—Ç–æ —è –∏—Å–∫—Ä–µ–Ω–Ω–µ —É–≤–∞–∂–∞—é —Ç–µ–±—è –∫–∞–∫ —á–µ–ª–æ–≤–µ–∫–∞?",
        "–í —á—ë–º —Ç—ã –¥–ª—è –º–µ–Ω—è –æ–ø–æ—Ä–∞?"
      ],
      alt: "–ü—Ä–∞–≤–∏–ª–æ: –±–µ–∑ —Å–∞—Ä–∫–∞–∑–º–∞. –ß–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ–µ ‚Äî —Ç–µ–º —Ç–µ–ø–ª–µ–µ."
    },
    {
      id: "goodMemory",
      tag: "üü©",
      name: "–ü—Ä–∏—è—Ç–Ω–æ–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ",
      intent: "–ü—Ä–æ —Ç–µ–ø–ª–æ –∏ —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–≤—è–∑–∏.",
      light: [
        "–ú–µ–ª–æ—á—å, –∫–æ—Ç–æ—Ä–∞—è –¥–æ —Å–∏—Ö –ø–æ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç —É–ª—ã–±–∫—É.",
        "–ß—Ç–æ –º–Ω–µ —Ö–æ—á–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–∏—Ç—å?"
      ],
      deep: [
        "–ö–∞–∫–æ–π –º–æ–º–µ–Ω—Ç —Å —Ç–æ–±–æ–π –±—ã–ª –¥–ª—è –º–µ–Ω—è –æ—Å–æ–±–µ–Ω–Ω–æ —Ç—ë–ø–ª—ã–º?",
        "–ß—Ç–æ —è —Ç–æ–≥–¥–∞ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª(–∞)?",
        "–ß—Ç–æ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –≥–æ–≤–æ—Ä–∏—Ç –æ –Ω–∞—Å?"
      ],
      alt: "–ú–æ–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –≤ 2‚Äì3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö."
    },
    {
      id: "hope",
      tag: "üü•",
      name: "–ù–∞–¥–µ–∂–¥–∞",
      intent: "–ü—Ä–æ –±—É–¥—É—â–µ–µ –±–µ–∑ –æ–±–µ—â–∞–Ω–∏–π –∏ –¥–∞–≤–ª–µ–Ω–∏—è.",
      light: [
        "–ß—Ç–æ –º–Ω–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π —á–∞—â–µ?",
        "–ö–∞–∫–æ–π –º–∞–ª–µ–Ω—å–∫–∏–π ¬´—à–∞–≥ –∫ –Ω–∞–º¬ª —è –±—ã —Ö–æ—Ç–µ–ª(–∞)?"
      ],
      deep: [
        "–Ø –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –±—É–¥–µ—Ç, –Ω–æ —è –Ω–∞–¥–µ—é—Å—å‚Ä¶",
        "–ù–∞ —á—Ç–æ-—Ç–æ –º–µ–∂–¥—É –Ω–∞–º–∏ / –≤ –Ω–∞—à–µ–º –∫–æ–Ω—Ç–∞–∫—Ç–µ.",
        "–ß—Ç–æ –º–Ω–µ –≤–∞–∂–Ω–æ –±–µ—Ä–µ—á—å –≤ –Ω–∞—Å?"
      ],
      alt: "–≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—å–±–∞ –∏ –Ω–µ –ø–ª–∞–Ω. –ü—Ä–æ—Å—Ç–æ –¥–µ–ª—é—Å—å."
    }
  ];

  // ======= –°–æ—Å—Ç–æ—è–Ω–∏–µ =======
  let remaining = [...CARDS.map(c => c.id)];
  let history = [];
  let paused = false;
  let seconds = 0;
  let interval = null;

  const $ = (id) => document.getElementById(id);

  function formatTime(s) {
    const mm = String(Math.floor(s / 60)).padStart(2, "0");
    const ss = String(s % 60).padStart(2, "0");
    return `${mm}:${ss}`;
  }

  function startTimer() {
    if (interval) return;
    interval = setInterval(() => {
      if (!paused) {
        seconds += 1;
        $("timer").textContent = formatTime(seconds);
      }
    }, 1000);
  }

  function setCard(card) {
    $("cardName").textContent = `${card.tag} ${card.name}`;
    $("cardTag").style.display = "inline-flex";
    $("cardTag").textContent = card.intent;

    const mode = $("modeSel").value;
    const qs = (mode === "deep") ? card.deep : card.light;

    $("cardQuestions").innerHTML = qs.map(q => `<li>${q}</li>`).join("");
    $("cardAlt").textContent = card.alt || "";
  }

  function drawCard() {
    startTimer();

    if (remaining.length === 0) {
      $("cardName").textContent = "–ö–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å :)";
      $("cardTag").style.display = "none";
      $("cardIntent").textContent = "";
      $("cardQuestions").innerHTML = "";
      $("cardAlt").textContent = "–ù–∞–∂–º–∏—Ç–µ ¬´–ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è¬ª, —á—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ—à–∞—Ç—å –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ.";
      return;
    }

    const idx = Math.floor(Math.random() * remaining.length);
    const id = remaining.splice(idx, 1)[0];
    const card = CARDS.find(c => c.id === id);
    history.push(card);

    setCard(card);
    renderHistory();
  }

  function renderHistory() {
    const items = history.map((c, i) => `<li>${c.tag} ${c.name}</li>`).join("");
    $("historyList").innerHTML = items || "<li class='muted'>–ü–æ–∫–∞ –ø—É—Å—Ç–æ</li>";
  }

  function resetSession() {
    remaining = [...CARDS.map(c => c.id)];
    history = [];
    seconds = 0;
    paused = false;
    $("timer").textContent = "00:00";
    $("pauseBtn").textContent = "–ü–∞—É–∑–∞";
    $("cardName").textContent = "–ù–∞–∂–º–∏—Ç–µ ‚Äú–í—ã—Ç—è–Ω—É—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É‚Äù";
    $("cardTag").style.display = "none";
    $("cardQuestions").innerHTML = "";
    $("cardAlt").textContent = "";
    renderHistory();
  }

  // ======= –°–æ–±—ã—Ç–∏—è =======
  $("drawBtn").addEventListener("click", drawCard);

  $("pauseBtn").addEventListener("click", () => {
    paused = !paused;
    $("pauseBtn").textContent = paused ? "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" : "–ü–∞—É–∑–∞";
  });

  $("resetBtn").addEventListener("click", resetSession);

  $("modeSel").addEventListener("change", () => {
    // –ø–µ—Ä–µ—Ä–∏—Å—É–µ–º —Ç–µ–∫—É—â—É—é –∫–∞—Ä—Ç–æ—á–∫—É –≤ –Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    const last = history[history.length - 1];
    if (last) setCard(last);
  });

  // ======= –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è =======
  const d = new Date();
  $("datePill").textContent = d.toLocaleDateString("ru-RU", { year:"numeric", month:"long", day:"numeric" });
  renderHistory();
</script>
</body>
</html>
